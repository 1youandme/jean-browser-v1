{'role': 'assistant', 'content': '\n<function_calls>\n<create-file file_path="src/components/ProxyPanel.tsx">\nimport React, { useState, useEffect } from \'react\';\nimport { Shield, Play, Square, Plus, Settings, RefreshCw, Globe, Lock } from \'lucide-react\';\nimport { Tab, ProxyNode } from \'../types\';\n\ninterface ProxyPanelProps {\n  tab?: Tab;\n}\n\nexport const ProxyPanel: React.FC<ProxyPanelProps> = ({ tab }) => {\n  const [proxyNodes, setProxyNodes] = useState<ProxyNode[]>([]);\n  const [isConnected, setIsConnected] = useState(false);\n  const [activeNodeId, setActiveNodeId] = useState<string | null>(null);\n  const [showAddNode, setShowAddNode] = useState(false);\n\n  useEffect(() => {\n    // Load proxy nodes from backend\n    loadProxyNodes();\n  }, []);\n\n  const loadProxyNodes = async () => {\n    try {\n      // Would call actual API here\n      const mockNodes: ProxyNode[] = [\n        {\n          id: \'1\',\n          userId: \'user1\',\n          host: \'proxy1.example.com\',\n          port: 8080,\n          protocol: \'http\',\n          status: \'active\',\n          lastCheckedAt: new Date(),\n          createdAt: new Date(),\n        },\n        {\n          id: \'2\',\n          userId: \'user1\',\n          host: \'proxy2.example.com\',\n          port: 1080,\n          protocol: \'socks5\',\n          status: \'inactive\',\n          lastCheckedAt: new Date(),\n          createdAt: new Date(),\n        },\n      ];\n      setProxyNodes(mockNodes);\n    } catch (error) {\n      console.error(\'Failed to load proxy nodes:\', error);\n    }\n  };\n\n  const handleConnectProxy = async (nodeId: string) => {\n    try {\n      // Would start proxy session here\n      setActiveNodeId(nodeId);\n      setIsConnected(true);\n    } catch (error) {\n      console.error(\'Failed to connect to proxy:\', error);\n    }\n  };\n\n  const handleDisconnectProxy = async () => {\n    try {\n      // Would stop proxy session here\n      setActiveNodeId(null);\n      setIsConnected(false);\n    } catch (error) {\n      console.error(\'Failed to disconnect from proxy:\', error);\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \'active\':\n        return \'text-green-500\';\n      case \'inactive\':\n        return \'text-gray-500\';\n      case \'error\':\n        return \'text-red-500\';\n      default:\n        return \'text-gray-500\';\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case \'active\':\n        return \'üü¢\';\n      case \'inactive\':\n        return \'‚ö™\';\n      case \'error\':\n        return \'üî¥\';\n      default:\n        return \'‚ö™\';\n    }\n  };\n\n  return (\n    <div className="flex-1 flex flex-col bg-gray-50">\n      {/* Header */}\n      <div className="h-12 bg-white border-b border-gray-200 flex items-center justify-between px-4">\n        <div className="flex items-center gap-2">\n          <Shield className="w-5 h-5 text-blue-600" />\n          <span className="font-medium">Proxy Network</span>\n          {isConnected && (\n            <span className="px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full">\n              Connected\n            </span>\n          )}\n        </div>\n        \n        <div className="flex items-center gap-2">\n          <button\n            onClick={loadProxyNodes}\n            className="p-1 hover:bg-gray-100 rounded transition-colors"\n            title="Refresh proxy nodes"\n          >\n            <RefreshCw className="w-4 h-4" />\n          </button>\n          <button\n            onClick={() => setShowAddNode(!showAddNode)}\n            className="p-1 hover:bg-gray-100 rounded transition-colors"\n            title="Add proxy node"\n          >\n            <Plus className="w-4 h-4" />\n          </button>\n          <button\n            className="p-1 hover:bg-gray-100 rounded transition-colors"\n            title="Proxy settings"\n          >\n            <Settings className="w-4 h-4" />\n          </button>\n        </div>\n      </div>\n\n      {/* Add Node Form */}\n      {showAddNode && (\n        <div className="border-b border-gray-200 bg-blue-50 p-4">\n          <div className="space-y-3">\n            <div>\n              <label className="block text-sm font-medium text-gray-700 mb-1">\n                Host\n              </label>\n              <input\n                type="text"\n                placeholder="proxy.example.com"\n                className="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"\n              />\n            </div>\n            <div className="grid grid-cols-2 gap-3">\n              <div>\n                <label className="block text-sm font-medium text-gray-700 mb-1">\n                  Port\n                </label>\n                <input\n                  type="number"\n                  placeholder="8080"\n                  className="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"\n                />\n              </div>\n              <div>\n                <label className="block text-sm font-medium text-gray-700 mb-1">\n                  Protocol\n                </label>\n                <select className="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">\n                  <option value="http">HTTP</option>\n                  <option value="socks5">SOCKS5</option>\n                </select>\n              </div>\n            </div>\n            <div className="flex gap-2">\n              <button className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors">\n                Add Node\n              </button>\n              <button\n                onClick={() => setShowAddNode(false)}\n                className="px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Connection Status */}\n      <div className="bg-white border-b border-gray-200 p-4">\n        <div className="flex items-center justify-between">\n          <div className="flex items-center gap-3">\n            {isConnected ? (\n              <>\n                <Lock className="w-5 h-5 text-green-500" />\n                <div>\n                  <div className="font-medium text-green-700">Proxy Active</div>\n                  <div className="text-sm text-gray-600">\n                    {proxyNodes.find(n => n.id === activeNodeId)?.host}:{proxyNodes.find(n => n.id === activeNodeId)?.port}\n                  </div>\n                </div>\n              </>\n            ) : (\n              <>\n                <Globe className="w-5 h-5 text-gray-500" />\n                <div>\n                  <div className="font-medium text-gray-700">Direct Connection</div>\n                  <div className="text-sm text-gray-600">Not using proxy</div>\n                </div>\n              </>\n            )}\n          </div>\n          \n          {isConnected ? (\n            <button\n              onClick={handleDisconnectProxy}\n              className="flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors"\n            >\n              <Square className="w-4 h-4" />\n              Disconnect\n            </button>\n          ) : (\n            <button\n              disabled={proxyNodes.length === 0}\n              className="flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"\n            >\n              <Play className="w-4 h-4" />\n              Connect\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Proxy Nodes List */}\n      <div className="flex-1 overflow-auto">\n        <div className="p-4">\n          <h3 className="font-medium text-gray-900 mb-3">Available Proxy Nodes</h3>\n          \n          {proxyNodes.length === 0 ? (\n            <div className="text-center py-8">\n              <div className="text-4xl mb-4">üõ°Ô∏è</div>\n              <p className="text-gray-500 mb-4">No proxy nodes configured</p>\n              <button\n                onClick={() => setShowAddNode(true)}\n                className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"\n              >\n                Add First Proxy Node\n              </button>\n            </div>\n          ) : (\n            <div className="space-y-3">\n              {proxyNodes.map((node) => (\n                <div\n                  key={node.id}\n                  className="bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow"\n                >\n                  <div className="flex items-center justify-between">\n                    <div className="flex items-center gap-3">\n                      <span className="text-2xl">{getStatusIcon(node.status)}</span>\n                      <div>\n                        <div className="font-medium text-gray-900">\n                          {node.host}:{node.port}\n                        </div>\n                        <div className="text-sm text-gray-600">\n                          {node.protocol.toUpperCase()} ‚Ä¢ {node.status}\n                        </div>\n                        {node.lastCheckedAt && (\n                          <div className="text-xs text-gray-500">\n                            Last checked: {node.lastCheckedAt.toLocaleString()}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                    \n                    <div className="flex items-center gap-2">\n                      {node.status === \'active\' && !isConnected && (\n                        <button\n                          onClick={() => handleConnectProxy(node.id)}\n                          className="px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors"\n                        >\n                          Connect\n                        </button>\n                      )}\n                      <button className="p-1 hover:bg-gray-100 rounded transition-colors">\n                        <Settings className="w-4 h-4" />\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Traffic Stats */}\n      <div className="border-t border-gray-200 bg-white p-4">\n        <div className="grid grid-cols-2 gap-4 text-sm">\n          <div>\n            <div className="text-gray-600">Upload</div>\n            <div className="font-medium">0 MB</div>\n          </div>\n          <div>\n            <div className="text-gray-600">Download</div>\n            <div className="font-medium">0 MB</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n</create-file>\n</function_calls>'}