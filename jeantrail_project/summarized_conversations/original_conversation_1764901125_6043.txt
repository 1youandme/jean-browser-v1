{'role': 'assistant', 'content': '\n<function_calls>\n<create-file file_path="src/services/proxy.ts">\nimport { ProxyNode, ProxySession } from \'../types\';\n\nexport interface ProxyService {\n  // Node management\n  createNode: (host: string, port: number, protocol: string) => Promise<ProxyNode>;\n  getNodes: () => Promise<ProxyNode[]>;\n  getNode: (id: string) => Promise<ProxyNode>;\n  updateNode: (id: string, updates: Partial<ProxyNode>) => Promise<ProxyNode>;\n  deleteNode: (id: string) => Promise<void>;\n  testNode: (id: string) => Promise<boolean>;\n  \n  // Session management\n  startSession: (nodeId: string) => Promise<ProxySession>;\n  getSessions: () => Promise<ProxySession[]>;\n  stopSession: (sessionId: string) => Promise<void>;\n  getSessionStats: (sessionId: string) => Promise<{ bytesUp: number; bytesDown: number }>;\n  \n  // Connection management\n  connectToNode: (nodeId: string) => Promise<void>;\n  disconnectFromNode: () => Promise<void>;\n  getConnectionStatus: () => Promise<{ connected: boolean; nodeId?: string }>;\n}\n\nclass ProxyServiceImpl implements ProxyService {\n  private baseUrl: string;\n\n  constructor(baseUrl: string = \'http://localhost:8080\') {\n    this.baseUrl = baseUrl;\n  }\n\n  async createNode(host: string, port: number, protocol: string): Promise<ProxyNode> {\n    const response = await fetch(`${this.baseUrl}/api/proxy/nodes`, {\n      method: \'POST\',\n      headers: {\n        \'Content-Type\': \'application/json\',\n      },\n      body: JSON.stringify({ host, port, protocol }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to create proxy node: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  async getNodes(): Promise<ProxyNode[]> {\n    const response = await fetch(`${this.baseUrl}/api/proxy/nodes`);\n    \n    if (!response.ok) {\n      throw new Error(`Failed to fetch proxy nodes: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  async getNode(id: string): Promise<ProxyNode> {\n    const response = await fetch(`${this.baseUrl}/api/proxy/nodes/${id}`);\n    \n    if (!response.ok) {\n      throw new Error(`Failed to fetch proxy node: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  async updateNode(id: string, updates: Partial<ProxyNode>): Promise<ProxyNode> {\n    const response = await fetch(`${this.baseUrl}/api/proxy/nodes/${id}`, {\n      method: \'PUT\',\n      headers: {\n        \'Content-Type\': \'application/json\',\n      },\n      body: JSON.stringify(updates),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to update proxy node: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  async deleteNode(id: string): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/api/proxy/nodes/${id}`, {\n      method: \'DELETE\',\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to delete proxy node: ${response.statusText}`);\n    }\n  }\n\n  async testNode(id: string): Promise<boolean> {\n    try {\n      const response = await fetch(`${this.baseUrl}/api/proxy/nodes/${id}/test`, {\n        method: \'POST\',\n      });\n      return response.ok;\n    } catch {\n      return false;\n    }\n  }\n\n  async startSession(nodeId: string): Promise<ProxySession> {\n    const response = await fetch(`${this.baseUrl}/api/proxy/sessions`, {\n      method: \'POST\',\n      headers: {\n        \'Content-Type\': \'application/json\',\n      },\n      body: JSON.stringify({ node_id: nodeId }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to start proxy session: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  async getSessions(): Promise<ProxySession[]> {\n    const response = await fetch(`${this.baseUrl}/api/proxy/sessions`);\n    \n    if (!response.ok) {\n      throw new Error(`Failed to fetch proxy sessions: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  async stopSession(sessionId: string): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/api/proxy/sessions/${sessionId}`, {\n      method: \'DELETE\',\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to stop proxy session: ${response.statusText}`);\n    }\n  }\n\n  async getSessionStats(sessionId: string): Promise<{ bytesUp: number; bytesDown: number }> {\n    const response = await fetch(`${this.baseUrl}/api/proxy/sessions/${sessionId}/stats`);\n    \n    if (!response.ok) {\n      throw new Error(`Failed to fetch session stats: ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  async connectToNode(nodeId: string): Promise<void> {\n    await this.startSession(nodeId);\n  }\n\n  async disconnectFromNode(): Promise<void> {\n    // Would stop active session\n    console.log(\'Disconnecting from proxy node\');\n  }\n\n  async getConnectionStatus(): Promise<{ connected: boolean; nodeId?: string }> {\n    // Would check active session\n    return { connected: false };\n  }\n}\n\n// Singleton instance\nexport const proxyService = new ProxyServiceImpl();\n\n// React hook\nexport const useProxyService = (): ProxyService => {\n  return proxyService;\n};\n</create-file>\n</function_calls>'}