{'role': 'assistant', 'content': '\n<function_calls>\n<create-file file_path="src/services/socialfeed.ts">\n// Social Feed Service Interface and Implementation\nexport interface Post {\n  id: string;\n  author: User;\n  content: string;\n  media?: MediaContent[];\n  hashtags: string[];\n  mentions: string[];\n  likes: number;\n  comments: number;\n  shares: number;\n  isLiked: boolean;\n  isBookmarked: boolean;\n  visibility: \'public\' | \'friends\' | \'private\';\n  location?: Location;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport interface User {\n  id: string;\n  username: string;\n  displayName: string;\n  avatar?: string;\n  bio?: string;\n  verified: boolean;\n  followerCount: number;\n  followingCount: number;\n  postCount: number;\n  isFollowing: boolean;\n  isBlocked: boolean;\n  joinedAt: Date;\n}\n\nexport interface MediaContent {\n  id: string;\n  type: \'image\' | \'video\' | \'audio\' | \'gif\';\n  url: string;\n  thumbnail?: string;\n  duration?: number;\n  size: number;\n  metadata?: Record<string, any>;\n}\n\nexport interface Comment {\n  id: string;\n  postId: string;\n  author: User;\n  content: string;\n  media?: MediaContent[];\n  likes: number;\n  isLiked: boolean;\n  parentId?: string;\n  replies: Comment[];\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport interface Location {\n  name: string;\n  address: string;\n  coordinates: {\n    lat: number;\n    lng: number;\n  };\n}\n\nexport interface Story {\n  id: string;\n  author: User;\n  media: MediaContent[];\n  viewers: string[];\n  createdAt: Date;\n  expiresAt: Date;\n  isViewed: boolean;\n}\n\nexport interface SocialFeedService {\n  // Feed management\n  getFeed: (type?: \'home\' | \'trending\' | \'following\', limit?: number) => Promise<Post[]>;\n  getPost: (id: string) => Promise<Post>;\n  createPost: (content: string, media?: File[], visibility?: string) => Promise<Post>;\n  updatePost: (id: string, content: string) => Promise<Post>;\n  deletePost: (id: string) => Promise<void>;\n  \n  // Post interactions\n  likePost: (postId: string) => Promise<void>;\n  unlikePost: (postId: string) => Promise<void>;\n  sharePost: (postId: string, message?: string) => Promise<Post>;\n  bookmarkPost: (postId: string) => Promise<void>;\n  unbookmarkPost: (postId: string) => Promise<void>;\n  \n  // Comments\n  getComments: (postId: string) => Promise<Comment[]>;\n  createComment: (postId: string, content: string, media?: File[], parentId?: string) => Promise<Comment>;\n  updateComment: (commentId: string, content: string) => Promise<Comment>;\n  deleteComment: (commentId: string) => Promise<void>;\n  likeComment: (commentId: string) => Promise<void>;\n  unlikeComment: (commentId: string) => Promise<void>;\n  \n  // User management\n  getUserProfile: (username: string) => Promise<User>;\n  getUserPosts: (username: string) => Promise<Post[]>;\n  followUser: (username: string) => Promise<void>;\n  unfollowUser: (username: string) => Promise<void>;\n  blockUser: (username: string) => Promise<void>;\n  unblockUser: (username: string) => Promise<void>;\n  getFollowers: (username: string) => Promise<User[]>;\n  getFollowing: (username: string) => Promise<User[]>;\n  updateProfile: (updates: Partial<UserProfile>) => Promise<User>;\n  \n  // Stories\n  getStories: () => Promise<Story[]>;\n  getUserStories: (username: string) => Promise<Story[]>;\n  createStory: (media: File[], duration?: number) => Promise<Story>;\n  viewStory: (storyId: string) => Promise<void>;\n  deleteStory: (storyId: string) => Promise<void>;\n  \n  // Search and discovery\n  searchPosts: (query: string, filters?: SearchFilters) => Promise<Post[]>;\n  searchUsers: (query: string) => Promise<User[]>;\n  getTrendingHashtags: () => Promise<TrendingHashtag[]>;\n  getForYouFeed: () => Promise<Post[]>;\n  \n  // Notifications\n  getNotifications: () => Promise<Notification[]>;\n  markNotificationRead: (notificationId: string) => Promise<void>;\n  markAllNotificationsRead: () => Promise<void>;\n  \n  // Media upload\n  uploadMedia: (file: File) => Promise<MediaContent>;\n  deleteMedia: (mediaId: string) => Promise<void>;\n}\n\nexport interface UserProfile {\n  displayName: string;\n  bio?: string;\n  avatar?: string;\n  headerImage?: string;\n  location?: string;\n  website?: string;\n  birthdate?: string;\n  private: boolean;\n}\n\nexport interface SearchFilters {\n  type?: \'posts\' | \'users\' | \'hashtags\';\n  dateRange?: {\n    from: Date;\n    to: Date;\n  };\n  mediaType?: \'image\' | \'video\' | \'all\';\n  sortBy?: \'relevance\' | \'recent\' | \'popular\';\n}\n\nexport interface TrendingHashtag {\n  tag: string;\n  posts: number;\n  growth: number;\n}\n\nexport interface Notification {\n  id: string;\n  type: \'like\' | \'comment\' | \'follow\' | \'mention\' | \'share\' | \'story_view\';\n  message: string;\n  user: User;\n  postId?: string;\n  commentId?: string;\n  storyId?: string;\n  isRead: boolean;\n  createdAt: Date;\n}\n\nclass SocialFeedServiceImpl implements SocialFeedService {\n  private baseUrl: string;\n\n  constructor(baseUrl: string = \'http://localhost:8080\') {\n    this.baseUrl = baseUrl;\n  }\n\n  async getFeed(type?: \'home\' | \'trending\' | \'following\', limit?: number): Promise<Post[]> {\n    const params = new URLSearchParams();\n    if (type) params.append(\'type\', type);\n    if (limit) params.append(\'limit\', limit.toString());\n\n    const response = await fetch(`${this.baseUrl}/api/social/feed?${params}`);\n    if (!response.ok) throw new Error(\'Failed to get feed\');\n    return response.json();\n  }\n\n  async getPost(id: string): Promise<Post> {\n    const response = await fetch(`${this.baseUrl}/api/social/posts/${id}`);\n    if (!response.ok) throw new Error(\'Failed to get post\');\n    return response.json();\n  }\n\n  async createPost(content: string, media?: File[], visibility?: string): Promise<Post> {\n    const formData = new FormData();\n    formData.append(\'content\', content);\n    if (visibility) formData.append(\'visibility\', visibility);\n    if (media) {\n      media.forEach(file => formData.append(\'media\', file));\n    }\n\n    const response = await fetch(`${this.baseUrl}/api/social/posts`, {\n      method: \'POST\',\n      body: formData,\n    });\n    if (!response.ok) throw new Error(\'Failed to create post\');\n    return response.json();\n  }\n\n  async updatePost(id: string, content: string): Promise<Post> {\n    const response = await fetch(`${this.baseUrl}/api/social/posts/${id}`, {\n      method: \'PUT\',\n      headers: { \'Content-Type\': \'application/json\' },\n      body: JSON.stringify({ content }),\n    });\n    if (!response.ok) throw new Error(\'Failed to update post\');\n    return response.json();\n  }\n\n  async deletePost(id: string): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/api/social/posts/${id}`, {\n      method: \'DELETE\',\n    });\n    if (!response.ok) throw new Error(\'Failed to delete post\');\n  }\n\n  async likePost(postId: string): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/api/social/posts/${postId}/like`, {\n      method: \'POST\',\n    });\n    if (!response.ok) throw new Error(\'Failed to like post\');\n  }\n\n  async unlikePost(postId: string): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/api/social/posts/${postId}/like`, {\n      method: \'DELETE\',\n    });\n    if (!response.ok) throw new Error(\'Failed to unlike post\');\n  }\n\n  async sharePost(postId: string, message?: string): Promise<Post> {\n    const response = await fetch(`${this.baseUrl}/api/social/posts/${postId}/share`, {\n      method: \'POST\',\n      headers: { \'Content-Type\': \'application/json\' },\n      body: JSON.stringify({ message }),\n    });\n    if (!response.ok) throw new Error(\'Failed to share post\');\n    return response.json();\n  }\n\n  async bookmarkPost(postId: string): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/api/social/posts/${postId}/bookmark`, {\n      method: \'POST\',\n    });\n    if (!response.ok) throw new Error(\'Failed to bookmark post\');\n  }\n\n  async unbookmarkPost(postId: string): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/api/social/posts/${postId}/bookmark`, {\n      method: \'DELETE\',\n    });\n    if (!response.ok) throw new Error(\'Failed to unbookmark post\');\n  }\n\n  async getComments(postId: string): Promise<Comment[]> {\n    const response = await fetch(`${this.baseUrl}/api/social/posts/${postId}/comments`);\n    if (!response.ok) throw new Error(\'Failed to get comments\');\n    return response.json();\n  }\n\n  async createComment(postId: string, content: string, media?: File[], parentId?: string): Promise<Comment> {\n    const formData = new FormData();\n    formData.append(\'content\', content);\n    if (parentId) formData.append(\'parentId\', parentId);\n    if (media) {\n      media.forEach(file => formData.append(\'media\', file));\n    }\n\n    const response = await fetch(`${this.baseUrl}/api/social/posts/${postId}/comments`, {\n      method: \'POST\',\n      body: formData,\n    });\n    if (!response.ok) throw new Error(\'Failed to create comment\');\n    return response.json();\n  }\n\n  async updateComment(commentId: string, content: string): Promise<Comment> {\n    const response = await fetch(`${this.baseUrl}/api/social/comments/${commentId}`, {\n      method: \'PUT\',\n      headers: { \'Content-Type\': \'application/json\' },\n      body: JSON.stringify({ content }),\n    });\n    if (!response.ok) throw new Error(\'Failed to update comment\');\n    return response.json();\n  }\n\n  async deleteComment(commentId: string): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/api/social/comments/${commentId}`, {\n      method: \'DELETE\',\n    });\n    if (!response.ok) throw new Error(\'Failed to delete comment\');\n  }\n\n  async likeComment(commentId: string): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/api/social/comments/${commentId}/like`, {\n      method: \'POST\',\n    });\n    if (!response.ok) throw new Error(\'Failed to like comment\');\n  }\n\n  async unlikeComment(commentId: string): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/api/social/comments/${commentId}/like`, {\n      method: \'DELETE\',\n    });\n    if (!response.ok) throw new Error(\'Failed to unlike comment\');\n  }\n\n  async getUserProfile(username: string): Promise<User> {\n    const response = await fetch(`${this.baseUrl}/api/social/users/${username}`);\n    if (!response.ok) throw new Error(\'Failed to get user profile\');\n    return response.json();\n  }\n\n  async getUserPosts(username: string): Promise<Post[]> {\n    const response = await fetch(`${this.baseUrl}/api/social/users/${username}/posts`);\n    if (!response.ok) throw new Error(\'Failed to get user posts\');\n    return response.json();\n  }\n\n  async followUser(username: string): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/api/social/users/${username}/follow`, {\n      method: \'POST\',\n    });\n    if (!response.ok) throw new Error(\'Failed to follow user\');\n  }\n\n  async unfollowUser(username: string): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/api/social/users/${username}/follow`, {\n      method: \'DELETE\',\n    });\n    if (!response.ok) throw new Error(\'Failed to unfollow user\');\n  }\n\n  async blockUser(username: string): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/api/social/users/${username}/block`, {\n      method: \'POST\',\n    });\n    if (!response.ok) throw new Error(\'Failed to block user\');\n  }\n\n  async unblockUser(username: string): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/api/social/users/${username}/block`, {\n      method: \'DELETE\',\n    });\n    if (!response.ok) throw new Error(\'Failed to unblock user\');\n  }\n\n  async getFollowers(username: string): Promise<User[]> {\n    const response = await fetch(`${this.baseUrl}/api/social/users/${username}/followers`);\n    if (!response.ok) throw new Error(\'Failed to get followers\');\n    return response.json();\n  }\n\n  async getFollowing(username: string): Promise<User[]> {\n    const response = await fetch(`${this.baseUrl}/api/social/users/${username}/following`);\n    if (!response.ok) throw new Error(\'Failed to get following\');\n    return response.json();\n  }\n\n  async updateProfile(updates: Partial<UserProfile>): Promise<User> {\n    const response = await fetch(`${this.baseUrl}/api/social/profile`, {\n      method: \'PUT\',\n      headers: { \'Content-Type\': \'application/json\' },\n      body: JSON.stringify(updates),\n    });\n    if (!response.ok) throw new Error(\'Failed to update profile\');\n    return response.json();\n  }\n\n  async getStories(): Promise<Story[]> {\n    const response = await fetch(`${this.baseUrl}/api/social/stories`);\n    if (!response.ok) throw new Error(\'Failed to get stories\');\n    return response.json();\n  }\n\n  async getUserStories(username: string): Promise<Story[]> {\n    const response = await fetch(`${this.baseUrl}/api/social/users/${username}/stories`);\n    if (!response.ok) throw new Error(\'Failed to get user stories\');\n    return response.json();\n  }\n\n  async createStory(media: File[], duration?: number): Promise<Story> {\n    const formData = new FormData();\n    media.forEach(file => formData.append(\'media\', file));\n    if (duration) formData.append(\'duration\', duration.toString());\n\n    const response = await fetch(`${this.baseUrl}/api/social/stories`, {\n      method: \'POST\',\n      body: formData,\n    });\n    if (!response.ok) throw new Error(\'Failed to create story\');\n    return response.json();\n  }\n\n  async viewStory(storyId: string): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/api/social/stories/${storyId}/view`, {\n      method: \'POST\',\n    });\n    if (!response.ok) throw new Error(\'Failed to view story\');\n  }\n\n  async deleteStory(storyId: string): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/api/social/stories/${storyId}`, {\n      method: \'DELETE\',\n    });\n    if (!response.ok) throw new Error(\'Failed to delete story\');\n  }\n\n  async searchPosts(query: string, filters?: SearchFilters): Promise<Post[]> {\n    const params = new URLSearchParams({ query });\n    if (filters) {\n      Object.entries(filters).forEach(([key, value]) => {\n        if (value !== undefined) {\n          params.append(key, String(value));\n        }\n      });\n    }\n\n    const response = await fetch(`${this.baseUrl}/api/social/search/posts?${params}`);\n    if (!response.ok) throw new Error(\'Failed to search posts\');\n    return response.json();\n  }\n\n  async searchUsers(query: string): Promise<User[]> {\n    const response = await fetch(`${this.baseUrl}/api/social/search/users?q=${encodeURIComponent(query)}`);\n    if (!response.ok) throw new Error(\'Failed to search users\');\n    return response.json();\n  }\n\n  async getTrendingHashtags(): Promise<TrendingHashtag[]> {\n    const response = await fetch(`${this.baseUrl}/api/social/trending/hashtags`);\n    if (!response.ok) throw new Error(\'Failed to get trending hashtags\');\n    return response.json();\n  }\n\n  async getForYouFeed(): Promise<Post[]> {\n    const response = await fetch(`${this.baseUrl}/api/social/feed/for-you`);\n    if (!response.ok) throw new Error(\'Failed to get for you feed\');\n    return response.json();\n  }\n\n  async getNotifications(): Promise<Notification[]> {\n    const response = await fetch(`${this.baseUrl}/api/social/notifications`);\n    if (!response.ok) throw new Error(\'Failed to get notifications\');\n    return response.json();\n  }\n\n  async markNotificationRead(notificationId: string): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/api/social/notifications/${notificationId}/read`, {\n      method: \'POST\',\n    });\n    if (!response.ok) throw new Error(\'Failed to mark notification as read\');\n  }\n\n  async markAllNotificationsRead(): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/api/social/notifications/read-all`, {\n      method: \'POST\',\n    });\n    if (!response.ok) throw new Error(\'Failed to mark all notifications as read\');\n  }\n\n  async uploadMedia(file: File): Promise<MediaContent> {\n    const formData = new FormData();\n    formData.append(\'media\', file);\n\n    const response = await fetch(`${this.baseUrl}/api/social/media/upload`, {\n      method: \'POST\',\n      body: formData,\n    });\n    if (!response.ok) throw new Error(\'Failed to upload media\');\n    return response.json();\n  }\n\n  async deleteMedia(mediaId: string): Promise<void> {\n    const response = await fetch(`${this.baseUrl}/api/social/media/${mediaId}`, {\n      method: \'DELETE\',\n    });\n    if (!response.ok) throw new Error(\'Failed to delete media\');\n  }\n}\n\nexport const socialFeedService = new SocialFeedServiceImpl();\nexport const useSocialFeedService = () => socialFeedService;\n</create-file>\n</function_calls>'}