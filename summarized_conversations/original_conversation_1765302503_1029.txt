{'role': 'assistant', 'content': '\n<function_calls>\n<create-file file_path="src/pages/Projects.tsx">\nimport React, { useState, useEffect } from \'react\';\nimport { useNavigate } from \'react-router-dom\';\nimport { Button } from \'@/components/ui/Button\';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \'@/components/ui/Card\';\nimport { Input } from \'@/components/ui/Input\';\nimport { Modal } from \'@/components/ui/Modal\';\nimport { useProjectsStore } from \'@/store\';\nimport { useUIStore } from \'@/store\';\nimport { \n  Folder, \n  Plus, \n  Search, \n  Filter, \n  Grid, \n  List, \n  Calendar,\n  User,\n  Activity,\n  MoreHorizontal,\n  Edit,\n  Trash2,\n  Eye,\n  Code,\n  Database,\n  Globe\n} from \'lucide-react\';\n\nexport const Projects: React.FC = () => {\n  const navigate = useNavigate();\n  const { \n    projects, \n    activeProject, \n    isLoading, \n    createProject, \n    updateProject, \n    deleteProject, \n    setActiveProject,\n    loadProjects \n  } = useProjectsStore();\n  \n  const { language, addNotification } = useUIStore();\n  \n  const [searchQuery, setSearchQuery] = useState(\'\');\n  const [viewMode, setViewMode] = useState<\'grid\' | \'list\'>(\'grid\');\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [selectedProject, setSelectedProject] = useState<Project | null>(null);\n  const [formData, setFormData] = useState({\n    name: \'\',\n    description: \'\',\n    type: \'web\',\n    tags: [] as string[],\n  });\n\n  const isRTL = language === \'ar\';\n\n  useEffect(() => {\n    loadProjects();\n  }, [loadProjects]);\n\n  const projectTypes = [\n    { value: \'web\', label: \'Web Application\', icon: <Globe className="h-4 w-4" /> },\n    { value: \'mobile\', label: \'Mobile App\', icon: <Smartphone className="h-4 w-4" /> },\n    { value: \'ai\', label: \'AI Project\', icon: <Cpu className="h-4 w-4" /> },\n    { value: \'database\', label: \'Database\', icon: <Database className="h-4 w-4" /> },\n    { value: \'api\', label: \'API Service\', icon: <Code className="h-4 w-4" /> },\n  ];\n\n  const filteredProjects = projects.filter(project =>\n    project.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    project.description.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    project.tags.some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase()))\n  );\n\n  const handleCreateProject = async () => {\n    try {\n      await createProject(formData);\n      setShowCreateModal(false);\n      setFormData({ name: \'\', description: \'\', type: \'web\', tags: [] });\n      addNotification({\n        id: \'project-created\',\n        type: \'success\',\n        title: isRTL ? \'تم إنشاء المشروع\' : \'Project Created\',\n        message: isRTL ? \'تم إنشاء المشروع بنجاح\' : \'Project created successfully\',\n      });\n    } catch (error) {\n      addNotification({\n        id: \'project-create-error\',\n        type: \'error\',\n        title: isRTL ? \'خطأ\' : \'Error\',\n        message: isRTL ? \'فشل إنشاء المشروع\' : \'Failed to create project\',\n      });\n    }\n  };\n\n  const handleEditProject = async () => {\n    if (!selectedProject) return;\n    \n    try {\n      await updateProject(selectedProject.id, formData);\n      setShowEditModal(false);\n      setSelectedProject(null);\n      setFormData({ name: \'\', description: \'\', type: \'web\', tags: [] });\n      addNotification({\n        id: \'project-updated\',\n        type: \'success\',\n        title: isRTL ? \'تم تحديث المشروع\' : \'Project Updated\',\n        message: isRTL ? \'تم تحديث المشروع بنجاح\' : \'Project updated successfully\',\n      });\n    } catch (error) {\n      addNotification({\n        id: \'project-update-error\',\n        type: \'error\',\n        title: isRTL ? \'خطأ\' : \'Error\',\n        message: isRTL ? \'فشل تحديث المشروع\' : \'Failed to update project\',\n      });\n    }\n  };\n\n  const handleDeleteProject = async () => {\n    if (!selectedProject) return;\n    \n    try {\n      await deleteProject(selectedProject.id);\n      setShowDeleteModal(false);\n      setSelectedProject(null);\n      addNotification({\n        id: \'project-deleted\',\n        type: \'success\',\n        title: isRTL ? \'تم حذف المشروع\' : \'Project Deleted\',\n        message: isRTL ? \'تم حذف المشروع بنجاح\' : \'Project deleted successfully\',\n      });\n    } catch (error) {\n      addNotification({\n        id: \'project-delete-error\',\n        type: \'error\',\n        title: isRTL ? \'خطأ\' : \'Error\',\n        message: isRTL ? \'فشل حذف المشروع\' : \'Failed to delete project\',\n      });\n    }\n  };\n\n  const openEditModal = (project: Project) => {\n    setSelectedProject(project);\n    setFormData({\n      name: project.name,\n      description: project.description,\n      type: project.type,\n      tags: project.tags,\n    });\n    setShowEditModal(true);\n  };\n\n  const openDeleteModal = (project: Project) => {\n    setSelectedProject(project);\n    setShowDeleteModal(true);\n  };\n\n  const getProjectTypeIcon = (type: string) => {\n    const projectType = projectTypes.find(t => t.value === type);\n    return projectType?.icon || <Folder className="h-4 w-4" />;\n  };\n\n  const getProjectTypeLabel = (type: string) => {\n    const projectType = projectTypes.find(t => t.value === type);\n    return projectType?.label || type;\n  };\n\n  return (\n    <div className={`min-h-screen bg-gray-50 dark:bg-gray-900 ${isRTL ? \'rtl\' : \'ltr\'}`}>\n      {/* Header */}\n      <div className="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700">\n        <div className="container mx-auto px-4 py-4">\n          <div className="flex items-center justify-between">\n            <div className="flex items-center space-x-4">\n              <Folder className="h-8 w-8 text-blue-500" />\n              <div>\n                <h1 className="text-2xl font-bold text-gray-900 dark:text-white">\n                  {isRTL ? \'المشاريع\' : \'Projects\'}\n                </h1>\n                <p className="text-sm text-gray-600 dark:text-gray-400">\n                  {isRTL ? \'إدارة مشاريعك وتطبيقاتك\' : \'Manage your projects and applications\'}\n                </p>\n              </div>\n            </div>\n            \n            <Button onClick={() => setShowCreateModal(true)}>\n              <Plus className="mr-2 h-4 w-4" />\n              {isRTL ? \'مشروع جديد\' : \'New Project\'}\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {/* Toolbar */}\n      <div className="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700">\n        <div className="container mx-auto px-4 py-3">\n          <div className="flex items-center justify-between">\n            <div className="flex items-center space-x-4">\n              <div className="relative">\n                <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400" />\n                <Input\n                  placeholder={isRTL ? \'البحث عن مشاريع...\' : \'Search projects...\'}\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className="pl-10 w-80"\n                />\n              </div>\n              \n              <Button variant="outline" size="sm">\n                <Filter className="mr-2 h-4 w-4" />\n                {isRTL ? \'تصفية\' : \'Filter\'}\n              </Button>\n            </div>\n            \n            <div className="flex items-center space-x-2">\n              <Button\n                variant={viewMode === \'grid\' ? \'default\' : \'outline\'}\n                size="sm"\n                onClick={() => setViewMode(\'grid\')}\n              >\n                <Grid className="h-4 w-4" />\n              </Button>\n              <Button\n                variant={viewMode === \'list\' ? \'default\' : \'outline\'}\n                size="sm"\n                onClick={() => setViewMode(\'list\')}\n              >\n                <List className="h-4 w-4" />\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className="container mx-auto px-4 py-6">\n        {isLoading ? (\n          <div className="flex justify-center items-center h-64">\n            <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"></div>\n          </div>\n        ) : filteredProjects.length === 0 ? (\n          <div className="text-center py-12">\n            <Folder className="h-16 w-16 text-gray-400 mx-auto mb-4" />\n            <h3 className="text-xl font-semibold text-gray-900 dark:text-white mb-2">\n              {isRTL ? \'لا توجد مشاريع\' : \'No Projects Found\'}\n            </h3>\n            <p className="text-gray-600 dark:text-gray-400 mb-6">\n              {isRTL ? \'ابدأ بإنشاء مشروع جديد\' : \'Start by creating a new project\'}\n            </p>\n            <Button onClick={() => setShowCreateModal(true)}>\n              <Plus className="mr-2 h-4 w-4" />\n              {isRTL ? \'إنشاء مشروع\' : \'Create Project\'}\n            </Button>\n          </div>\n        ) : (\n          <>\n            {viewMode === \'grid\' ? (\n              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">\n                {filteredProjects.map((project) => (\n                  <Card key={project.id} className="hover:shadow-lg transition-shadow cursor-pointer">\n                    <CardHeader className="pb-3">\n                      <div className="flex items-start justify-between">\n                        <div className="flex items-center space-x-2">\n                          <div className="p-2 bg-blue-100 dark:bg-blue-900 rounded-lg">\n                            {getProjectTypeIcon(project.type)}\n                          </div>\n                          <div>\n                            <CardTitle className="text-lg">{project.name}</CardTitle>\n                            <CardDescription className="text-sm">\n                              {getProjectTypeLabel(project.type)}\n                            </CardDescription>\n                          </div>\n                        </div>\n                        <Button variant="ghost" size="sm">\n                          <MoreHorizontal className="h-4 w-4" />\n                        </Button>\n                      </div>\n                    </CardHeader>\n                    \n                    <CardContent>\n                      <p className="text-sm text-gray-600 dark:text-gray-400 mb-4 line-clamp-2">\n                        {project.description}\n                      </p>\n                      \n                      <div className="flex flex-wrap gap-1 mb-4">\n                        {project.tags.slice(0, 3).map((tag) => (\n                          <span\n                            key={tag}\n                            className="px-2 py-1 bg-gray-100 dark:bg-gray-700 text-xs rounded-full"\n                          >\n                            {tag}\n                          </span>\n                        ))}\n                        {project.tags.length > 3 && (\n                          <span className="px-2 py-1 bg-gray-100 dark:bg-gray-700 text-xs rounded-full">\n                            +{project.tags.length - 3}\n                          </span>\n                        )}\n                      </div>\n                      \n                      <div className="flex items-center justify-between text-xs text-gray-500 dark:text-gray-400">\n                        <div className="flex items-center space-x-1">\n                          <Calendar className="h-3 w-3" />\n                          <span>{new Date(project.createdAt).toLocaleDateString()}</span>\n                        </div>\n                        <div className="flex items-center space-x-1">\n                          <Activity className="h-3 w-3" />\n                          <span>{project.updatedAt ? new Date(project.updatedAt).toLocaleDateString() : \'Never\'}</span>\n                        </div>\n                      </div>\n                      \n                      <div className="flex space-x-2 mt-4">\n                        <Button\n                          size="sm"\n                          variant="outline"\n                          className="flex-1"\n                          onClick={() => setActiveProject(project)}\n                        >\n                          <Eye className="h-3 w-3 mr-1" />\n                          {isRTL ? \'عرض\' : \'View\'}\n                        </Button>\n                        <Button\n                          size="sm"\n                          variant="outline"\n                          onClick={() => openEditModal(project)}\n                        >\n                          <Edit className="h-3 w-3" />\n                        </Button>\n                        <Button\n                          size="sm"\n                          variant="outline"\n                          onClick={() => openDeleteModal(project)}\n                        >\n                          <Trash2 className="h-3 w-3" />\n                        </Button>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : (\n              <div className="space-y-4">\n                {filteredProjects.map((project) => (\n                  <Card key={project.id} className="hover:shadow-md transition-shadow">\n                    <CardContent className="p-6">\n                      <div className="flex items-center justify-between">\n                        <div className="flex items-center space-x-4">\n                          <div className="p-3 bg-blue-100 dark:bg-blue-900 rounded-lg">\n                            {getProjectTypeIcon(project.type)}\n                          </div>\n                          <div className="flex-1">\n                            <h3 className="font-semibold text-lg text-gray-900 dark:text-white">\n                              {project.name}\n                            </h3>\n                            <p className="text-sm text-gray-600 dark:text-gray-400 mb-2">\n                              {project.description}\n                            </p>\n                            <div className="flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400">\n                              <span>{getProjectTypeLabel(project.type)}</span>\n                              <div className="flex items-center space-x-1">\n                                <Calendar className="h-3 w-3" />\n                                <span>{new Date(project.createdAt).toLocaleDateString()}</span>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                        \n                        <div className="flex items-center space-x-2">\n                          <Button size="sm" variant="outline" onClick={() => setActiveProject(project)}>\n                            <Eye className="h-4 w-4 mr-1" />\n                            {isRTL ? \'عرض\' : \'View\'}\n                          </Button>\n                          <Button size="sm" variant="outline" onClick={() => openEditModal(project)}>\n                            <Edit className="h-4 w-4" />\n                          </Button>\n                          <Button size="sm" variant="outline" onClick={() => openDeleteModal(project)}>\n                            <Trash2 className="h-4 w-4" />\n                          </Button>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            )}\n          </>\n        )}\n      </div>\n\n      {/* Create Modal */}\n      <Modal\n        isOpen={showCreateModal}\n        onClose={() => setShowCreateModal(false)}\n        title={isRTL ? \'إنشاء مشروع جديد\' : \'Create New Project\'}\n      >\n        <div className="space-y-4">\n          <Input\n            label={isRTL ? \'اسم المشروع\' : \'Project Name\'}\n            value={formData.name}\n            onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n            placeholder={isRTL ? \'أدخل اسم المشروع...\' : \'Enter project name...\'}\n          />\n          \n          <div>\n            <label className="text-sm font-medium mb-2 block">\n              {isRTL ? \'الوصف\' : \'Description\'}\n            </label>\n            <textarea\n              className="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800"\n              rows={3}\n              value={formData.description}\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n              placeholder={isRTL ? \'وصف المشروع...\' : \'Project description...\'}\n            />\n          </div>\n          \n          <div>\n            <label className="text-sm font-medium mb-2 block">\n              {isRTL ? \'نوع المشروع\' : \'Project Type\'}\n            </label>\n            <div className="grid grid-cols-2 gap-2">\n              {projectTypes.map((type) => (\n                <Button\n                  key={type.value}\n                  variant={formData.type === type.value ? \'default\' : \'outline\'}\n                  onClick={() => setFormData({ ...formData, type: type.value })}\n                  className="justify-start"\n                >\n                  {type.icon}\n                  <span className="ml-2">{type.label}</span>\n                </Button>\n              ))}\n            </div>\n          </div>\n        </div>\n        \n        <div className="flex justify-end space-x-3 mt-6">\n          <Button variant="outline" onClick={() => setShowCreateModal(false)}>\n            {isRTL ? \'إلغاء\' : \'Cancel\'}\n          </Button>\n          <Button onClick={handleCreateProject} disabled={!formData.name}>\n            {isRTL ? \'إنشاء\' : \'Create\'}\n          </Button>\n        </div>\n      </Modal>\n\n      {/* Edit Modal */}\n      <Modal\n        isOpen={showEditModal}\n        onClose={() => setShowEditModal(false)}\n        title={isRTL ? \'تحرير المشروع\' : \'Edit Project\'}\n      >\n        <div className="space-y-4">\n          <Input\n            label={isRTL ? \'اسم المشروع\' : \'Project Name\'}\n            value={formData.name}\n            onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n          />\n          \n          <div>\n            <label className="text-sm font-medium mb-2 block">\n              {isRTL ? \'الوصف\' : \'Description\'}\n            </label>\n            <textarea\n              className="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800"\n              rows={3}\n              value={formData.description}\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n            />\n          </div>\n        </div>\n        \n        <div className="flex justify-end space-x-3 mt-6">\n          <Button variant="outline" onClick={() => setShowEditModal(false)}>\n            {isRTL ? \'إلغاء\' : \'Cancel\'}\n          </Button>\n          <Button onClick={handleEditProject} disabled={!formData.name}>\n            {isRTL ? \'حفظ\' : \'Save\'}\n          </Button>\n        </div>\n      </Modal>\n\n      {/* Delete Modal */}\n      <Modal\n        isOpen={showDeleteModal}\n        onClose={() => setShowDeleteModal(false)}\n        title={isRTL ? \'حذف المشروع\' : \'Delete Project\'}\n      >\n        <div className="space-y-4">\n          <p className="text-gray-700 dark:text-gray-300">\n            {isRTL \n              ? \'هل أنت متأكد من أنك تريد حذف هذا المشروع؟ هذا الإجراء لا يمكن التراجع عنه.\' \n              : \'Are you sure you want to delete this project? This action cannot be undone.\'\n            }\n          </p>\n          {selectedProject && (\n            <div className="p-3 bg-gray-100 dark:bg-gray-700 rounded-lg">\n              <p className="font-medium">{selectedProject.name}</p>\n              <p className="text-sm text-gray-600 dark:text-gray-400">{selectedProject.description}</p>\n            </div>\n          )}\n        </div>\n        \n        <div className="flex justify-end space-x-3 mt-6">\n          <Button variant="outline" onClick={() => setShowDeleteModal(false)}>\n            {isRTL ? \'إلغاء\' : \'Cancel\'}\n          </Button>\n          <Button variant="destructive" onClick={handleDeleteProject}>\n            {isRTL ? \'حذف\' : \'Delete\'}\n          </Button>\n        </div>\n      </Modal>\n    </div>\n  );\n};\n</create-file>\n</function_calls>'}