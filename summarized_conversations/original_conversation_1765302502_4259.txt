{'role': 'assistant', 'content': '\n<function_calls>\n<create-file file_path="src/store/index.ts">\nimport { create } from \'zustand\';\nimport { devtools, persist } from \'zustand/middleware\';\n\n// User Authentication Store\ninterface AuthState {\n  user: User | null;\n  token: string | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  login: (email: string, password: string) => Promise<void>;\n  logout: () => void;\n  register: (userData: RegisterData) => Promise<void>;\n  refreshToken: () => Promise<void>;\n}\n\nexport const useAuthStore = create<AuthState>()(\n  devtools(\n    persist(\n      (set, get) => ({\n        user: null,\n        token: null,\n        isAuthenticated: false,\n        isLoading: false,\n\n        login: async (email: string, password: string) => {\n          set({ isLoading: true });\n          try {\n            const response = await fetch(\'/api/auth/login\', {\n              method: \'POST\',\n              headers: { \'Content-Type\': \'application/json\' },\n              body: JSON.stringify({ email, password }),\n            });\n            \n            if (response.ok) {\n              const { user, token } = await response.json();\n              set({ user, token, isAuthenticated: true, isLoading: false });\n            } else {\n              throw new Error(\'Login failed\');\n            }\n          } catch (error) {\n            set({ isLoading: false });\n            throw error;\n          }\n        },\n\n        logout: () => {\n          set({ user: null, token: null, isAuthenticated: false });\n        },\n\n        register: async (userData: RegisterData) => {\n          set({ isLoading: true });\n          try {\n            const response = await fetch(\'/api/auth/register\', {\n              method: \'POST\',\n              headers: { \'Content-Type\': \'application/json\' },\n              body: JSON.stringify(userData),\n            });\n            \n            if (response.ok) {\n              const { user, token } = await response.json();\n              set({ user, token, isAuthenticated: true, isLoading: false });\n            } else {\n              throw new Error(\'Registration failed\');\n            }\n          } catch (error) {\n            set({ isLoading: false });\n            throw error;\n          }\n        },\n\n        refreshToken: async () => {\n          const { token } = get();\n          if (!token) return;\n          \n          try {\n            const response = await fetch(\'/api/auth/refresh\', {\n              method: \'POST\',\n              headers: { \n                \'Content-Type\': \'application/json\',\n                \'Authorization\': `Bearer ${token}`\n              },\n            });\n            \n            if (response.ok) {\n              const { token: newToken } = await response.json();\n              set({ token: newToken });\n            } else {\n              get().logout();\n            }\n          } catch (error) {\n            get().logout();\n          }\n        },\n      }),\n      {\n        name: \'auth-storage\',\n        partialize: (state) => ({ \n          user: state.user, \n          token: state.token, \n          isAuthenticated: state.isAuthenticated \n        }),\n      }\n    ),\n    { name: \'auth-store\' }\n  )\n);\n\n// UI State Store\ninterface UIState {\n  theme: \'light\' | \'dark\' | \'auto\';\n  language: \'en\' | \'ar\';\n  sidebarOpen: boolean;\n  activeTab: string;\n  notifications: Notification[];\n  toggleSidebar: () => void;\n  setTheme: (theme: \'light\' | \'dark\' | \'auto\') => void;\n  setLanguage: (language: \'en\' | \'ar\') => void;\n  setActiveTab: (tab: string) => void;\n  addNotification: (notification: Notification) => void;\n  removeNotification: (id: string) => void;\n}\n\nexport const useUIStore = create<UIState>()(\n  devtools(\n    persist(\n      (set) => ({\n        theme: \'dark\',\n        language: \'en\',\n        sidebarOpen: true,\n        activeTab: \'home\',\n        notifications: [],\n\n        toggleSidebar: () => set((state) => ({ sidebarOpen: !state.sidebarOpen })),\n        setTheme: (theme) => set({ theme }),\n        setLanguage: (language) => set({ language }),\n        setActiveTab: (activeTab) => set({ activeTab }),\n        addNotification: (notification) => \n          set((state) => ({ notifications: [...state.notifications, notification] })),\n        removeNotification: (id) => \n          set((state) => ({ \n            notifications: state.notifications.filter(n => n.id !== id) \n          })),\n      }),\n      {\n        name: \'ui-storage\',\n        partialize: (state) => ({ \n          theme: state.theme, \n          language: state.language,\n          sidebarOpen: state.sidebarOpen \n        }),\n      }\n    ),\n    { name: \'ui-store\' }\n  )\n);\n\n// Projects Store\ninterface ProjectsState {\n  projects: Project[];\n  activeProject: Project | null;\n  isLoading: boolean;\n  createProject: (project: CreateProjectData) => Promise<void>;\n  updateProject: (id: string, updates: Partial<Project>) => Promise<void>;\n  deleteProject: (id: string) => Promise<void>;\n  setActiveProject: (project: Project | null) => void;\n  loadProjects: () => Promise<void>;\n}\n\nexport const useProjectsStore = create<ProjectsState>()(\n  devtools(\n    (set, get) => ({\n      projects: [],\n      activeProject: null,\n      isLoading: false,\n\n      createProject: async (projectData: CreateProjectData) => {\n        set({ isLoading: true });\n        try {\n          const response = await fetch(\'/api/projects\', {\n            method: \'POST\',\n            headers: { \'Content-Type\': \'application/json\' },\n            body: JSON.stringify(projectData),\n          });\n          \n          if (response.ok) {\n            const newProject = await response.json();\n            set((state) => ({ \n              projects: [...state.projects, newProject],\n              isLoading: false \n            }));\n          } else {\n            throw new Error(\'Failed to create project\');\n          }\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      updateProject: async (id: string, updates: Partial<Project>) => {\n        try {\n          const response = await fetch(`/api/projects/${id}`, {\n            method: \'PUT\',\n            headers: { \'Content-Type\': \'application/json\' },\n            body: JSON.stringify(updates),\n          });\n          \n          if (response.ok) {\n            const updatedProject = await response.json();\n            set((state) => ({\n              projects: state.projects.map(p => p.id === id ? updatedProject : p),\n              activeProject: state.activeProject?.id === id ? updatedProject : state.activeProject\n            }));\n          } else {\n            throw new Error(\'Failed to update project\');\n          }\n        } catch (error) {\n          throw error;\n        }\n      },\n\n      deleteProject: async (id: string) => {\n        try {\n          const response = await fetch(`/api/projects/${id}`, {\n            method: \'DELETE\',\n          });\n          \n          if (response.ok) {\n            set((state) => ({\n              projects: state.projects.filter(p => p.id !== id),\n              activeProject: state.activeProject?.id === id ? null : state.activeProject\n            }));\n          } else {\n            throw new Error(\'Failed to delete project\');\n          }\n        } catch (error) {\n          throw error;\n        }\n      },\n\n      setActiveProject: (project: Project | null) => set({ activeProject: project }),\n\n      loadProjects: async () => {\n        set({ isLoading: true });\n        try {\n          const response = await fetch(\'/api/projects\');\n          if (response.ok) {\n            const projects = await response.json();\n            set({ projects, isLoading: false });\n          } else {\n            throw new Error(\'Failed to load projects\');\n          }\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n    }),\n    { name: \'projects-store\' }\n  )\n);\n\n// AI Services Store\ninterface AIServicesState {\n  services: AIService[];\n  activeService: AIService | null;\n  isProcessing: boolean;\n  lastResponse: AIResponse | null;\n  loadServices: () => Promise<void>;\n  setActiveService: (service: AIService | null) => void;\n  processRequest: (request: AIRequest) => Promise<AIResponse>;\n}\n\nexport const useAIServicesStore = create<AIServicesState>()(\n  devtools(\n    (set, get) => ({\n      services: [],\n      activeService: null,\n      isProcessing: false,\n      lastResponse: null,\n\n      loadServices: async () => {\n        try {\n          const response = await fetch(\'/api/ai/services\');\n          if (response.ok) {\n            const services = await response.json();\n            set({ services });\n          }\n        } catch (error) {\n          console.error(\'Failed to load AI services:\', error);\n        }\n      },\n\n      setActiveService: (service: AIService | null) => set({ activeService: service }),\n\n      processRequest: async (request: AIRequest) => {\n        set({ isProcessing: true });\n        try {\n          const response = await fetch(\'/api/ai/process\', {\n            method: \'POST\',\n            headers: { \'Content-Type\': \'application/json\' },\n            body: JSON.stringify(request),\n          });\n          \n          if (response.ok) {\n            const result = await response.json();\n            set({ lastResponse: result, isProcessing: false });\n            return result;\n          } else {\n            throw new Error(\'AI request failed\');\n          }\n        } catch (error) {\n          set({ isProcessing: false });\n          throw error;\n        }\n      },\n    }),\n    { name: \'ai-services-store\' }\n  )\n);\n</create-file>\n</function_calls>'}