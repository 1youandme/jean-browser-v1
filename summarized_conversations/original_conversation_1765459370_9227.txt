{'role': 'assistant', 'content': '\n## ðŸŽ¯ Creating Intelligent News Widget\n\nNow I\'ll create the Intelligent News Widget that extracts news based on user interests and provides real-time updates:\n\n<function_calls>\n<create-file file_path="jeantrail_project/src/components/IntelligentNewsWidget.tsx">\nimport React, { useState, useEffect, useCallback, useRef } from \'react\';\nimport {\n  Globe,\n  TrendingUp,\n  Clock,\n  ExternalLink,\n  Bookmark,\n  BookmarkCheck,\n  Share2,\n  Filter,\n  Search,\n  RefreshCw,\n  ChevronDown,\n  ChevronUp,\n  Zap,\n  Eye,\n  MessageSquare,\n  Heart,\n  Calendar,\n  User,\n  Tag,\n  Settings,\n  Bell,\n  BellOff,\n  X,\n  Check,\n  AlertCircle,\n  Newspaper\n} from \'lucide-react\';\n\n// Types\ninterface NewsArticle {\n  id: string;\n  title: string;\n  summary: string;\n  content: string;\n  url: string;\n  source: {\n    name: string;\n    logo: string;\n    url: string;\n    country: string;\n  };\n  author: string;\n  publishedAt: string;\n  category: string;\n  tags: string[];\n  imageUrl?: string;\n  readTime: number;\n  sentiment: \'positive\' | \'negative\' | \'neutral\';\n  importance: number; // 1-10\n  isBookmarked: boolean;\n  isRead: boolean;\n  engagement: {\n    views: number;\n    shares: number;\n    comments: number;\n    likes: number;\n  };\n}\n\ninterface UserInterests {\n  categories: string[];\n  topics: string[];\n  sources: string[];\n  languages: string[];\n  sentimentPreference: \'all\' | \'positive\' | \'negative\' | \'neutral\';\n  updateFrequency: number; // minutes\n  maxArticles: number;\n}\n\ninterface NewsSource {\n  id: string;\n  name: string;\n  url: string;\n  country: string;\n  category: string;\n  reliability: number; // 1-10\n  isActive: boolean;\n}\n\n// Mock data - replace with real API calls\nconst MOCK_NEWS_SOURCES: NewsSource[] = [\n  { id: \'bbc\', name: \'BBC News\', url: \'https://www.bbc.com/news\', country: \'UK\', category: \'general\', reliability: 9, isActive: true },\n  { id: \'cnn\', name: \'CNN\', url: \'https://www.cnn.com\', country: \'USA\', category: \'general\', reliability: 8, isActive: true },\n  { id: \'reuters\', name: \'Reuters\', url: \'https://www.reuters.com\', country: \'UK\', category: \'general\', reliability: 9, isActive: true },\n  { id: \'aljazeera\', name: \'Al Jazeera\', url: \'https://www.aljazeera.com\', country: \'Qatar\', category: \'general\', reliability: 8, isActive: true },\n  { id: \'techcrunch\', name: \'TechCrunch\', url: \'https://techcrunch.com\', country: \'USA\', category: \'technology\', reliability: 8, isActive: true },\n  { id: \'wired\', name: \'WIRED\', url: \'https://www.wired.com\', country: \'USA\', category: \'technology\', reliability: 8, isActive: true }\n];\n\nconst MOCK_CATEGORIES = [\n  \'general\', \'business\', \'entertainment\', \'health\', \'science\', \'sports\', \n  \'technology\', \'politics\', \'world\', \'local\', \'education\', \'environment\'\n];\n\nconst MOCK_INTERESTS: UserInterests = {\n  categories: [\'technology\', \'business\', \'science\'],\n  topics: [\'AI\', \'startups\', \'climate change\', \'space\'],\n  sources: [\'bbc\', \'reuters\', \'techcrunch\'],\n  languages: [\'en\', \'ar\'],\n  sentimentPreference: \'all\',\n  updateFrequency: 60,\n  maxArticles: 50\n};\n\nconst MOCK_ARTICLES: NewsArticle[] = [\n  {\n    id: \'1\',\n    title: \'Breakthrough in Quantum Computing Achieved by Research Team\',\n    summary: \'Scientists have successfully demonstrated a new quantum computing method that could revolutionize data processing.\',\n    content: \'Full article content would go here...\',\n    url: \'https://example.com/quantum-breakthrough\',\n    source: { name: \'BBC News\', logo: \'/logos/bbc.png\', url: \'https://www.bbc.com\', country: \'UK\' },\n    author: \'John Smith\',\n    publishedAt: \'2024-01-15T10:30:00Z\',\n    category: \'technology\',\n    tags: [\'quantum\', \'computing\', \'research\', \'breakthrough\'],\n    imageUrl: \'/images/quantum.jpg\',\n    readTime: 5,\n    sentiment: \'positive\',\n    importance: 9,\n    isBookmarked: false,\n    isRead: false,\n    engagement: { views: 1234, shares: 89, comments: 23, likes: 156 }\n  },\n  {\n    id: \'2\',\n    title: \'Global Climate Summit Reaches Historic Agreement\',\n    summary: \'World leaders have committed to unprecedented measures to combat climate change in a landmark summit.\',\n    content: \'Full article content would go here...\',\n    url: \'https://example.com/climate-summit\',\n    source: { name: \'Reuters\', logo: \'/logos/reuters.png\', url: \'https://www.reuters.com\', country: \'UK\' },\n    author: \'Sarah Johnson\',\n    publishedAt: \'2024-01-15T09:15:00Z\',\n    category: \'environment\',\n    tags: [\'climate\', \'summit\', \'agreement\', \'environment\'],\n    imageUrl: \'/images/climate.jpg\',\n    readTime: 7,\n    sentiment: \'positive\',\n    importance: 8,\n    isBookmarked: true,\n    isRead: false,\n    engagement: { views: 2341, shares: 234, comments: 67, likes: 289 }\n  },\n  {\n    id: \'3\',\n    title: \'Tech Startup Raises $100M in Series B Funding\',\n    summary: \'A promising AI startup has secured significant funding to expand its innovative platform globally.\',\n    content: \'Full article content would go here...\',\n    url: \'https://example.com/startup-funding\',\n    source: { name: \'TechCrunch\', logo: \'/logos/techcrunch.png\', url: \'https://techcrunch.com\', country: \'USA\' },\n    author: \'Mike Chen\',\n    publishedAt: \'2024-01-15T08:45:00Z\',\n    category: \'business\',\n    tags: [\'startup\', \'funding\', \'AI\', \'investment\'],\n    imageUrl: \'/images/startup.jpg\',\n    readTime: 4,\n    sentiment: \'positive\',\n    importance: 7,\n    isBookmarked: false,\n    isRead: true,\n    engagement: { views: 892, shares: 45, comments: 12, likes: 78 }\n  }\n];\n\n// Main Component\nexport const IntelligentNewsWidget: React.FC = () => {\n  const [articles, setArticles] = useState<NewsArticle[]>(MOCK_ARTICLES);\n  const [filteredArticles, setFilteredArticles] = useState<NewsArticle[]>(MOCK_ARTICLES);\n  const [interests, setInterests] = useState<UserInterests>(MOCK_INTERESTS);\n  const [selectedCategory, setSelectedCategory] = useState<string>(\'all\');\n  const [searchTerm, setSearchTerm] = useState<string>(\'\');\n  const [selectedArticle, setSelectedArticle] = useState<NewsArticle | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [lastUpdated, setLastUpdated] = useState<Date>(new Date());\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const [notificationsEnabled, setNotificationsEnabled] = useState(true);\n  const [showSettings, setShowSettings] = useState(false);\n  const [expandedArticles, setExpandedArticles] = useState<Set<string>>(new Set());\n  \n  const refreshIntervalRef = useRef<NodeJS.Timeout>();\n  const autoUpdateIntervalRef = useRef<NodeJS.Timeout>();\n\n  // Filter articles based on selected criteria\n  const filterArticles = useCallback(() => {\n    let filtered = [...articles];\n\n    // Category filter\n    if (selectedCategory !== \'all\') {\n      filtered = filtered.filter(article => article.category === selectedCategory);\n    }\n\n    // Search filter\n    if (searchTerm) {\n      const searchLower = searchTerm.toLowerCase();\n      filtered = filtered.filter(article =>\n        article.title.toLowerCase().includes(searchLower) ||\n        article.summary.toLowerCase().includes(searchLower) ||\n        article.tags.some(tag => tag.toLowerCase().includes(searchLower))\n      );\n    }\n\n    // User interests filter\n    if (interests.categories.length > 0) {\n      filtered = filtered.filter(article =>\n        interests.categories.includes(article.category) ||\n        article.tags.some(tag => interests.topics.some(topic => \n          tag.toLowerCase().includes(topic.toLowerCase())\n        ))\n      );\n    }\n\n    // Sentiment filter\n    if (interests.sentimentPreference !== \'all\') {\n      filtered = filtered.filter(article => article.sentiment === interests.sentimentPreference);\n    }\n\n    // Sort by importance and date\n    filtered.sort((a, b) => {\n      if (a.importance !== b.importance) {\n        return b.importance - a.importance;\n      }\n      return new Date(b.publishedAt).getTime() - new Date(a.publishedAt).getTime();\n    });\n\n    // Limit to max articles\n    filtered = filtered.slice(0, interests.maxArticles);\n\n    setFilteredArticles(filtered);\n  }, [articles, selectedCategory, searchTerm, interests]);\n\n  // Fetch news from API\n  const fetchNews = useCallback(async () => {\n    setIsLoading(true);\n    try {\n      // Simulate API call - replace with real NewsAPI or similar\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      \n      // Mock new articles\n      const newArticles: NewsArticle[] = MOCK_ARTICLES.map((article, index) => ({\n        ...article,\n        id: `${Date.now()}-${index}`,\n        publishedAt: new Date().toISOString(),\n        isRead: false,\n        isBookmarked: false\n      }));\n      \n      setArticles(prev => [...newArticles, ...prev]);\n      setLastUpdated(new Date());\n      \n      if (notificationsEnabled) {\n        // Show notification for important news\n        const importantNews = newArticles.filter(a => a.importance >= 8);\n        if (importantNews.length > 0) {\n          // Trigger notification system\n          console.log(\'New important news:\', importantNews);\n        }\n      }\n    } catch (error) {\n      console.error(\'Failed to fetch news:\', error);\n    } finally {\n      setIsLoading(false);\n      setIsRefreshing(false);\n    }\n  }, [notificationsEnabled]);\n\n  // Refresh news manually\n  const handleRefresh = useCallback(() => {\n    setIsRefreshing(true);\n    fetchNews();\n  }, [fetchNews]);\n\n  // Toggle bookmark\n  const toggleBookmark = useCallback((articleId: string) => {\n    setArticles(prev => prev.map(article =>\n      article.id === articleId \n        ? { ...article, isBookmarked: !article.isBookmarked }\n        : article\n    ));\n  }, []);\n\n  // Mark as read\n  const markAsRead = useCallback((articleId: string) => {\n    setArticles(prev => prev.map(article =>\n      article.id === articleId \n        ? { ...article, isRead: true }\n        : article\n    ));\n  }, []);\n\n  // Toggle article expansion\n  const toggleArticleExpansion = useCallback((articleId: string) => {\n    setExpandedArticles(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(articleId)) {\n        newSet.delete(articleId);\n      } else {\n        newSet.add(articleId);\n      }\n      return newSet;\n    });\n  }, []);\n\n  // Share article\n  const shareArticle = useCallback((article: NewsArticle) => {\n    if (navigator.share) {\n      navigator.share({\n        title: article.title,\n        text: article.summary,\n        url: article.url\n      });\n    } else {\n      // Fallback: copy to clipboard\n      navigator.clipboard.writeText(`${article.title} - ${article.url}`);\n    }\n  }, []);\n\n  // Update interests\n  const updateInterests = useCallback((newInterests: Partial<UserInterests>) => {\n    setInterests(prev => ({ ...prev, ...newInterests }));\n  }, []);\n\n  // Setup auto-refresh\n  useEffect(() => {\n    if (refreshIntervalRef.current) {\n      clearInterval(refreshIntervalRef.current);\n    }\n\n    const interval = setInterval(() => {\n      fetchNews();\n    }, interests.updateFrequency * 60 * 1000);\n\n    refreshIntervalRef.current = interval;\n\n    return () => {\n      if (refreshIntervalRef.current) {\n        clearInterval(refreshIntervalRef.current);\n      }\n    };\n  }, [fetchNews, interests.updateFrequency]);\n\n  // Filter articles when dependencies change\n  useEffect(() => {\n    filterArticles();\n  }, [filterArticles]);\n\n  // Get sentiment color\n  const getSentimentColor = (sentiment: string) => {\n    switch (sentiment) {\n      case \'positive\': return \'text-green-600 bg-green-100\';\n      case \'negative\': return \'text-red-600 bg-red-100\';\n      default: return \'text-gray-600 bg-gray-100\';\n    }\n  };\n\n  // Get importance indicator\n  const getImportanceIndicator = (importance: number) => {\n    if (importance >= 8) return { color: \'text-red-500\', label: \'High\' };\n    if (importance >= 6) return { color: \'text-yellow-500\', label: \'Medium\' };\n    return { color: \'text-blue-500\', label: \'Low\' };\n  };\n\n  // Format time ago\n  const formatTimeAgo = (dateString: string) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffInMinutes = Math.floor((now.getTime() - date.getTime()) / (1000 * 60));\n    \n    if (diffInMinutes < 60) return `${diffInMinutes}m ago`;\n    if (diffInMinutes < 1440) return `${Math.floor(diffInMinutes / 60)}h ago`;\n    return `${Math.floor(diffInMinutes / 1440)}d ago`;\n  };\n\n  return (\n    <div className="h-full flex flex-col bg-white">\n      {/* Header */}\n      <div className="border-b border-gray-200 p-4">\n        <div className="flex items-center justify-between mb-4">\n          <div className="flex items-center space-x-2">\n            <Newspaper className="w-5 h-5 text-blue-500" />\n            <h3 className="text-lg font-semibold text-gray-900">Intelligent News</h3>\n            <span className="px-2 py-1 text-xs font-medium text-blue-600 bg-blue-100 rounded-full">\n              {filteredArticles.length} articles\n            </span>\n          </div>\n          \n          <div className="flex items-center space-x-2">\n            <button\n              onClick={() => setNotificationsEnabled(!notificationsEnabled)}\n              className={`p-2 rounded-lg ${notificationsEnabled ? \'text-blue-600 bg-blue-100\' : \'text-gray-500 bg-gray-100\'}`}\n              title="Toggle notifications"\n            >\n              {notificationsEnabled ? <Bell className="w-4 h-4" /> : <BellOff className="w-4 h-4" />}\n            </button>\n            <button\n              onClick={() => setShowSettings(!showSettings)}\n              className="p-2 text-gray-500 hover:bg-gray-100 rounded-lg"\n              title="Settings"\n            >\n              <Settings className="w-4 h-4" />\n            </button>\n            <button\n              onClick={handleRefresh}\n              disabled={isRefreshing}\n              className="p-2 text-gray-500 hover:bg-gray-100 rounded-lg disabled:opacity-50"\n              title="Refresh"\n            >\n              <RefreshCw className={`w-4 h-4 ${isRefreshing ? \'animate-spin\' : \'\'}`} />\n            </button>\n          </div>\n        </div>\n\n        {/* Controls */}\n        <div className="flex items-center space-x-3">\n          <div className="relative flex-1">\n            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4" />\n            <input\n              type="text"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              placeholder="Search news..."\n              className="pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"\n            />\n          </div>\n          \n          <select\n            value={selectedCategory}\n            onChange={(e) => setSelectedCategory(e.target.value)}\n            className="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"\n          >\n            <option value="all">All Categories</option>\n            {MOCK_CATEGORIES.map(category => (\n              <option key={category} value={category}>\n                {category.charAt(0).toUpperCase() + category.slice(1)}\n              </option>\n            ))}\n          </select>\n        </div>\n      </div>\n\n      {/* Settings Panel */}\n      {showSettings && (\n        <div className="border-b border-gray-200 p-4 bg-gray-50">\n          <h4 className="font-medium text-gray-900 mb-3">News Preferences</h4>\n          <div className="grid grid-cols-2 gap-4">\n            <div>\n              <label className="block text-sm font-medium text-gray-700 mb-1">\n                Update Frequency (minutes)\n              </label>\n              <input\n                type="number"\n                value={interests.updateFrequency}\n                onChange={(e) => updateInterests({ updateFrequency: parseInt(e.target.value) })}\n                min="5"\n                max="1440"\n                className="w-full px-3 py-2 border border-gray-300 rounded-lg"\n              />\n            </div>\n            <div>\n              <label className="block text-sm font-medium text-gray-700 mb-1">\n                Max Articles\n              </label>\n              <input\n                type="number"\n                value={interests.maxArticles}\n                onChange={(e) => updateInterests({ maxArticles: parseInt(e.target.value) })}\n                min="10"\n                max="100"\n                className="w-full px-3 py-2 border border-gray-300 rounded-lg"\n              />\n            </div>\n            <div>\n              <label className="block text-sm font-medium text-gray-700 mb-1">\n                Sentiment Filter\n              </label>\n              <select\n                value={interests.sentimentPreference}\n                onChange={(e) => updateInterests({ sentimentPreference: e.target.value as any })}\n                className="w-full px-3 py-2 border border-gray-300 rounded-lg"\n              >\n                <option value="all">All</option>\n                <option value="positive">Positive</option>\n                <option value="negative">Negative</option>\n                <option value="neutral">Neutral</option>\n              </select>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* News List */}\n      <div className="flex-1 overflow-y-auto">\n        {isLoading && filteredArticles.length === 0 ? (\n          <div className="flex items-center justify-center h-full">\n            <div className="text-center">\n              <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"></div>\n              <p className="text-gray-600">Loading news...</p>\n            </div>\n          </div>\n        ) : filteredArticles.length === 0 ? (\n          <div className="flex items-center justify-center h-full">\n            <div className="text-center">\n              <AlertCircle className="w-12 h-12 text-gray-400 mx-auto mb-4" />\n              <p className="text-gray-600">No articles found</p>\n              <p className="text-sm text-gray-500 mt-2">Try adjusting your filters</p>\n            </div>\n          </div>\n        ) : (\n          <div className="space-y-1">\n            {filteredArticles.map((article) => {\n              const isExpanded = expandedArticles.has(article.id);\n              const importance = getImportanceIndicator(article.importance);\n              \n              return (\n                <div\n                  key={article.id}\n                  className={`border-b border-gray-100 p-4 hover:bg-gray-50 transition-colors ${\n                    article.isRead ? \'bg-gray-50\' : \'bg-white\'\n                  }`}\n                >\n                  <div className="flex items-start justify-between">\n                    <div className="flex-1">\n                      {/* Article Header */}\n                      <div className="flex items-center space-x-2 mb-2">\n                        <img\n                          src={article.source.logo}\n                          alt={article.source.name}\n                          className="w-4 h-4 rounded"\n                        />\n                        <span className="text-xs font-medium text-gray-600">\n                          {article.source.name}\n                        </span>\n                        <span className="text-xs text-gray-500">â€¢</span>\n                        <span className="text-xs text-gray-500">\n                          {formatTimeAgo(article.publishedAt)}\n                        </span>\n                        <span className="text-xs text-gray-500">â€¢</span>\n                        <span className="text-xs text-gray-500">\n                          {article.readTime} min read\n                        </span>\n                        <span className={`text-xs px-2 py-0.5 rounded-full ${getSentimentColor(article.sentiment)}`}>\n                          {article.sentiment}\n                        </span>\n                        <span className={`text-xs ${importance.color}`}>\n                          {importance.label} priority\n                        </span>\n                      </div>\n\n                      {/* Article Title */}\n                      <h4 className="font-medium text-gray-900 mb-2">\n                        {article.title}\n                      </h4>\n\n                      {/* Article Summary */}\n                      <p className="text-sm text-gray-600 mb-3">\n                        {article.summary}\n                      </p>\n\n                      {/* Expanded Content */}\n                      {isExpanded && (\n                        <div className="mb-3 p-3 bg-gray-50 rounded-lg">\n                          <p className="text-sm text-gray-700 mb-3">\n                            {article.content}\n                          </p>\n                          <div className="flex flex-wrap gap-2">\n                            {article.tags.map((tag) => (\n                              <span\n                                key={tag}\n                                className="px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded-full"\n                              >\n                                #{tag}\n                              </span>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n\n                      {/* Article Footer */}\n                      <div className="flex items-center justify-between">\n                        <div className="flex items-center space-x-4 text-xs text-gray-500">\n                          <span className="flex items-center space-x-1">\n                            <Eye className="w-3 h-3" />\n                            <span>{article.engagement.views}</span>\n                          </span>\n                          <span className="flex items-center space-x-1">\n                            <MessageSquare className="w-3 h-3" />\n                            <span>{article.engagement.comments}</span>\n                          </span>\n                          <span className="flex items-center space-x-1">\n                            <Share2 className="w-3 h-3" />\n                            <span>{article.engagement.shares}</span>\n                          </span>\n                          <span className="flex items-center space-x-1">\n                            <Heart className="w-3 h-3" />\n                            <span>{article.engagement.likes}</span>\n                          </span>\n                        </div>\n\n                        <div className="flex items-center space-x-2">\n                          <button\n                            onClick={() => toggleArticleExpansion(article.id)}\n                            className="p-1 text-gray-500 hover:text-gray-700"\n                            title={isExpanded ? \'Show less\' : \'Show more\'}\n                          >\n                            {isExpanded ? <ChevronUp className="w-4 h-4" /> : <ChevronDown className="w-4 h-4" />}\n                          </button>\n                          <button\n                            onClick={() => {\n                              toggleBookmark(article.id);\n                              markAsRead(article.id);\n                            }}\n                            className="p-1 text-gray-500 hover:text-blue-500"\n                            title={article.isBookmarked ? \'Remove bookmark\' : \'Bookmark\'}\n                          >\n                            {article.isBookmarked ? <BookmarkCheck className="w-4 h-4 text-blue-500" /> : <Bookmark className="w-4 h-4" />}\n                          </button>\n                          <button\n                            onClick={() => shareArticle(article)}\n                            className="p-1 text-gray-500 hover:text-blue-500"\n                            title="Share"\n                          >\n                            <Share2 className="w-4 h-4" />\n                          </button>\n                          <a\n                            href={article.url}\n                            target="_blank"\n                            rel="noopener noreferrer"\n                            onClick={() => markAsRead(article.id)}\n                            className="p-1 text-gray-500 hover:text-blue-500"\n                            title="Read full article"\n                          >\n                            <ExternalLink className="w-4 h-4" />\n                          </a>\n                        </div>\n                      </div>\n                    </div>\n\n                    {article.imageUrl && (\n                      <img\n                        src={article.imageUrl}\n                        alt={article.title}\n                        className="w-20 h-20 object-cover rounded-lg ml-4"\n                      />\n                    )}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n\n      {/* Footer */}\n      <div className="border-t border-gray-200 p-3 bg-gray-50">\n        <div className="flex items-center justify-between text-xs text-gray-600">\n          <div className="flex items-center space-x-4">\n            <span>Last updated: {formatTimeAgo(lastUpdated.toISOString())}</span>\n            <span>Auto-refresh: {interests.updateFrequency}min</span>\n          </div>\n          <div className="flex items-center space-x-2">\n            <Zap className="w-3 h-3 text-green-500" />\n            <span>Live updates</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default IntelligentNewsWidget;\n</create-file>\n</function_calls>'}